# syntax=docker/dockerfile:1
FROM ghcr.io/astral-sh/uv:0.6.6-python3.12-bookworm

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

WORKDIR /app

# Copy manifests first (better layer caching)
COPY pyproject.toml /app/pyproject.toml
COPY uv.lock /app/uv.lock

# Resolve + create venv using the lock
RUN uv sync --frozen

# Now copy the rest of the code
ADD . /app

# Defaults (override at runtime)
ENV MCP_SERVER_URL=http://oracle-mcp:8000


CMD ["uv", "run", "client/oracle_mcp_client.py"]
